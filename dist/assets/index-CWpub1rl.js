import{o as l,c,a as i,w as C,b as p,v as g,d as M,t as L,e as h,r as f,F as v,f as k,n as y,g as b,h as _,i as D}from"./vendor-BbG4uvbX.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))a(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const n of r.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&a(n)}).observe(document,{childList:!0,subtree:!0});function s(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(o){if(o.ep)return;o.ep=!0;const r=s(o);fetch(o.href,r)}})();const m=(e,t)=>{const s=e.__vccOpts||e;for(const[a,o]of t)s[a]=o;return s},E={name:"MapComponent",props:{locations:{type:Object,required:!0}},data(){return{map:null,userLocation:null,markers:[]}},watch:{locations(e){this.map&&this.addMultipleMarkers(e)}},mounted(){this.loadMap()},methods:{loadMap(){if(!navigator.geolocation){alert("Geolocation is not supported by this browser.");return}if(typeof google>"u"||typeof google.maps>"u"){const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCio8Y0JvrSM9-c42SoXdGM9MDTqx989A0&libraries=places",e.async=!0,e.defer=!0,e.onload=()=>{this.initMap()},e.onerror=()=>{console.error("Failed to load Google Maps API")},document.head.appendChild(e)}else this.initMap()},initMap(){navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,s=e.coords.longitude;this.userLocation={lat:t,lng:s},this.map=new google.maps.Map(this.$refs.map,{center:{lat:t,lng:s},zoom:14}),new google.maps.Marker({position:this.userLocation,map:this.map,title:"You are here"})},e=>{alert("Error getting location: "+e.message)})},addMultipleMarkers(e){this.clearMarkers(),e.hotels.forEach(t=>{const s=new google.maps.Marker({position:t,map:this.map,title:"Hotel",icon:"src/assets/icons/hotel_icon.jpg"});this.markers.push(s)}),e.restaurants.forEach(t=>{const s=new google.maps.Marker({position:t,map:this.map,title:"Restaurant",icon:"src/assets/icons/restaurant_icon.png"});this.markers.push(s)}),e.attractions.forEach(t=>{const s=new google.maps.Marker({position:t,map:this.map,title:"Attraction",icon:"src/assets/icons/attraction_icon.jpg"});this.markers.push(s)})},clearMarkers(){this.markers.forEach(e=>e.setMap(null)),this.markers=[]}}},F={id:"map",ref:"map"};function w(e,t,s,a,o,r){return l(),c("div",null,[i("div",F,null,512),i("button",{onClick:t[0]||(t[0]=(...n)=>e.sendLocationToOtherComponent&&e.sendLocationToOtherComponent(...n))},"Send Location")])}const S=m(E,[["render",w],["__scopeId","data-v-ad15ed39"]]),j={emits:["json-data"],data(){return{maxBudget:"",guests:"",location:"",autocomplete:null,useCurrentLocation:!1,selectedLocation:"",userLocation:{},locationLatLng:null,locationError:"",googleMapsScript:null}},methods:{async submitForm(){if(!this.useCurrentLocation&&!this.locationLatLng){this.locationError="Please select a valid location from the autocomplete suggestions.";return}this.locationError="";const e=this.useCurrentLocation&&this.userLocation.lat?`${this.userLocation.lat},${this.userLocation.lng}`:`${this.locationLatLng.lat},${this.locationLatLng.lng}`,t={maxBudget:this.maxBudget,guests:this.guests,location:e};console.log("Form Data:",t),this.$emit("json-data",t)},getUserLocation(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude,s=e.coords.longitude;this.userLocation={lat:t,lng:s}},e=>{console.error("Error getting location:",e.message)})},loadGoogleMapsScript(){if(window.google&&window.google.maps){this.initializeAutocomplete();return}this.googleMapsScript=document.createElement("script"),this.googleMapsScript.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCio8Y0JvrSM9-c42SoXdGM9MDTqx989A0&libraries=places",this.googleMapsScript.async=!0,this.googleMapsScript.onload=()=>{this.initializeAutocomplete()},document.head.appendChild(this.googleMapsScript)},initializeAutocomplete(){const e=this.$refs.locationInput,t={types:["(cities)"]};this.autocomplete=new google.maps.places.Autocomplete(e,t),this.autocomplete.addListener("place_changed",this.handlePlaceChanged)},handlePlaceChanged(){const e=this.autocomplete.getPlace();e&&e.geometry&&e.geometry.location?(this.locationLatLng={lat:e.geometry.location.lat(),lng:e.geometry.location.lng()},this.selectedLocation=e.formatted_address,this.locationError=""):(this.locationLatLng=null,this.locationError="Invalid location. Please select a valid place from the autocomplete suggestions.")}},mounted(){this.getUserLocation(),this.loadGoogleMapsScript()},beforeUnmount(){this.googleMapsScript&&document.head.removeChild(this.googleMapsScript)}},P={class:"form-container"},I={class:"form-wrapper"},$={class:"form-group"},O={class:"form-group"},x={class:"form-group"},A=["placeholder","disabled","required"],q={class:"location-checkbox"},T={key:0,class:"error-message"};function U(e,t,s,a,o,r){return l(),c("div",P,[i("div",I,[t[10]||(t[10]=i("h2",{class:"form-title"},"Event Planning Wizard",-1)),i("form",{onSubmit:t[4]||(t[4]=C((...n)=>r.submitForm&&r.submitForm(...n),["prevent"]))},[i("div",$,[t[5]||(t[5]=i("label",{for:"maxBudget"},"Max Budget",-1)),p(i("input",{type:"number",id:"maxBudget","onUpdate:modelValue":t[0]||(t[0]=n=>o.maxBudget=n),placeholder:"Enter maximum budget",required:"",min:"0"},null,512),[[g,o.maxBudget]])]),i("div",O,[t[6]||(t[6]=i("label",{for:"guests"},"Number of Guests",-1)),p(i("input",{type:"number",id:"guests","onUpdate:modelValue":t[1]||(t[1]=n=>o.guests=n),placeholder:"Enter number of guests",required:"",min:"1"},null,512),[[g,o.guests]])]),i("div",x,[t[8]||(t[8]=i("label",{for:"selectedLocation"},"Location",-1)),p(i("input",{type:"text",id:"selectedLocation","onUpdate:modelValue":t[2]||(t[2]=n=>o.selectedLocation=n),placeholder:o.useCurrentLocation?"Using current location":"Enter city or location",disabled:o.useCurrentLocation,required:!o.useCurrentLocation,ref:"locationInput"},null,8,A),[[g,o.selectedLocation]]),i("div",q,[p(i("input",{type:"checkbox",id:"useCurrentLocation","onUpdate:modelValue":t[3]||(t[3]=n=>o.useCurrentLocation=n)},null,512),[[M,o.useCurrentLocation]]),t[7]||(t[7]=i("label",{for:"useCurrentLocation"},"Use my current location",-1))]),o.locationError?(l(),c("span",T,L(o.locationError),1)):h("",!0)]),t[9]||(t[9]=i("button",{type:"submit"},"Submit Event Details",-1))],32)])])}const B=m(j,[["render",U],["__scopeId","data-v-b24cf8f8"]]),N={name:"Preferences",emits:["json-data"],components:{DetailsForm:B},data(){return{images:["./src/assets/food_choice/french.jpg","./src/assets/food_choice/greek.jpg","./src/assets/food_choice/israel.jpg","./src/assets/food_choice/italy.jpg","./src/assets/food_choice/thai.webp","./src/assets/food_choice/indian.avif"],FoodType:{French:"french_restaurant",Greek:"greek_restaurant",Israeli:"israeli_restaurant",Italian:"italian_restaurant",Thai:"thai_restaurant",Indian:"indian_restaurant"},chosen:-1,spiral_i:0,style_app:null,userLocation:null,receivedData:null,cuisine:null,interval_carousel:null,HideFood:!1,submited_1:!1,city_list:[],jsonData:{}}},methods:{getCuisineName(e){const t=e.split("/").pop().split(".")[0];return t.charAt(0).toUpperCase()+t.slice(1)},selectChoice(e){this.chosen=e},mouseOverFn(e){let t=Object.keys(this.FoodType)[e];this.city_list=[];for(let s=1;s<5;s++)this.city_list.push("./src/assets/city_photos/"+t+"/"+s+".jpg");this.style_app={backgroundImage:`url(${this.city_list[this.spiral_i]})`,transition:"background-image 1s ease"},clearInterval(this.interval_carousel),this.interval_carousel=setInterval(this.carousel,3e3)},carousel(){this.spiral_i=(this.spiral_i+1)%this.city_list.length,console.log(this.city_list[this.spiral_i]),this.style_app={backgroundImage:`url(${this.city_list[this.spiral_i]})`,transition:"background-image 1s ease-in"}},beforeDestroy(){clearInterval(this.interval_carousel),this.interval_carousel=null},handleReceivedData(e){console.log("Data received from DetailsForm:",e),this.$emit("json-data",e)},selectChoice(e){this.chosen=e,console.log(e),console.log(Object.values(this.FoodType)),this.cuisine=Object.values(this.FoodType)[e]||null},async submitChoices(){this.chosen>=0?(alert("Choices submitted: "+Object.values(this.FoodType)[this.chosen]),this.HideFood=!0,clearInterval(this.interval_carousel),this.interval_carousel=null):alert("Please choose at least one option.")},async fetchUserLocation(){return new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(s=>{this.userLocation=`${s.coords.latitude},${s.coords.longitude}`,e()},s=>{console.error("Error getting location:",s),alert("Error getting location: "+s.message),t()})})},async fetchFullRequest(){if(!this.userLocation){console.error("User location not available.");return}try{const e=`${state.server_domain}/api/full-request`,t={location:this.userLocation,radius:3e3,cuisine:this.cuisine},s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw new Error("Request failed");const a=await s.json();this.jsonData=a,console.log("Data from full request:",a)}catch(e){console.error("Error fetching data:",e)}}}},z={id:"food-choice",class:"container"},G={class:"grid-container"},R=["onClick"],J=["onMouseover"],V={class:"overlay"},H={class:"cuisine-name"},Y={class:"submit-section"},X={key:0,class:"error-message"},K=["disabled"],W={key:0,id:"form"};function Q(e,t,s,a,o,r){const n=f("DetailsForm");return l(),c(v,null,[i("div",{class:y(o.HideFood?"hide-div":"on-hover-image"),style:b(o.style_app)},[i("div",z,[i("div",G,[(l(!0),c(v,null,k(o.images,(u,d)=>(l(),c("div",{key:d,class:"choice-wrapper",onClick:re=>r.selectChoice(d)},[i("div",{class:y(["choice-box",{selected:o.chosen===d}]),style:b({backgroundImage:`url(${u})`}),onMouseover:()=>r.mouseOverFn(d)},[i("div",V,[i("span",H,L(r.getCuisineName(u)),1)])],46,J)],8,R))),128))]),i("div",Y,[o.chosen===-1?(l(),c("p",X,"Please choose a cuisine")):h("",!0),i("button",{onClick:t[0]||(t[0]=(...u)=>r.submitChoices&&r.submitChoices(...u)),disabled:o.chosen===-1,class:"submit-btn"}," Discover Restaurants ",8,K)])])],6),o.HideFood?(l(),c("div",W,[_(n,{onDataReceived:r.handleReceivedData},null,8,["onDataReceived"])])):h("",!0)],64)}const Z=m(N,[["render",Q],["__scopeId","data-v-f3d573f5"]]),ee={name:"App",components:{MapComponent:S,Preferences:Z},data(){return{locations:[],preferences_done:!1}},methods:{handleJsonData(e){this.preferences_done=!0,this.locations=e}}},te={id:"app"},oe={key:0};function se(e,t,s,a,o,r){const n=f("Preferences"),u=f("MapComponent");return l(),c("div",te,[_(n,{onJsonData:r.handleJsonData},null,8,["onJsonData"]),o.preferences_done?(l(),c("div",oe,[_(u,{locations:o.locations},null,8,["locations"])])):h("",!0)])}const ie=m(ee,[["render",se]]);D(ie).mount("#app");
